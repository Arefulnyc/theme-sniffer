!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t){e.exports=jQuery},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;var a,n=r(0),s=(a=n)&&a.__esModule?a:{default:a};t.ajax=function(e,t,r){return s.default.ajax(e).done(t).fail(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(0),o=(a=s)&&a.__esModule?a:{default:a},i=r(1);var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SHOW_CLASS="is-shown",this.ERROR_CLASS="is-error",this.WARNING_CLASS="is-warning",this.DISABLED_CLASS="is-disabled",this.reportItemHeading=t.reportItemHeading,this.reportReportTable=t.reportReportTable,this.reportNoticeType=t.reportNoticeType,this.reportItemLine=t.reportItemLine,this.reportItemType=t.reportItemType,this.reportItemMessage=t.reportItemMessage,this.$sniffReport=t.sniffReport,this.$progressBar=t.progressBar,this.$snifferInfo=t.snifferInfo,this.$checkNotice=t.checkNotice,this.$percentageBar=t.percentageBar,this.$percentageText=t.percentageText,this.$percentageCount=t.percentageCount,this.$errorNotice=t.errorNotice,this.$startNotice=t.startNotice,this.$meterBar=t.meterBar,this.$reportItem=t.reportItem,this.nonce=t.nonce,this.runAction=t.runAction,this.runSniff=t.runSniff,this.count=0,this.ajaxAllow=!0}return n(e,[{key:"enableAjax",value:function(){this.ajaxAllow=!0,this.$snifferInfo.removeClass(this.SHOW_CLASS)}},{key:"preventAjax",value:function(e){this.ajaxAllow=!1,this.$percentageText.html(localizationObject.ajaxStopped),this.$percentageCount.removeClass(this.SHOW_CLASS),(0,o.default)(e).removeClass(this.DISABLED_CLASS)}},{key:"themeCheckRunPHPCS",value:function(e,t,r,a,n,s,c){var u=this,f={themeName:t,hideWarning:r,rawOutput:a,ignoreAnnotations:n,minimumPHPVersion:s,wpRulesets:c,action:this.runAction,nonce:this.nonce};return!!this.ajaxAllow&&(0,i.ajax)({type:"POST",url:ajaxurl,data:f,beforeSend:function(t){u.$startNotice.addClass(u.SHOW_CLASS),u.$progressBar.removeClass(u.SHOW_CLASS),u.$errorNotice.removeClass(u.SHOW_CLASS),u.$checkNotice.removeClass(u.SHOW_CLASS),u.$percentageBar.removeClass(u.SHOW_CLASS),u.$percentageCount.empty(),u.$meterBar.css("width",0),u.$sniffReport.empty(),u.$snifferInfo.empty(),(0,o.default)(e).addClass(u.DISABLED_CLASS)}}).then(function(t){if(u.$progressBar.addClass(u.SHOW_CLASS),u.$percentageBar.addClass(u.SHOW_CLASS),u.$percentageCount.addClass(u.SHOW_CLASS),u.$meterBar.addClass(u.SHOW_CLASS),u.count=0,!0===t.success){var r=t.data[0],a=t.data[1],n=t.data[2],s=Object.keys(n).length,o=Object.values(n);u.$startNotice.removeClass(u.SHOW_CLASS),u.$percentageText.text(localizationObject.percentComplete),u.individualSniff(e,r,a,o,s,0)}else u.$progressBar.addClass(u.ERROR_CLASS),u.$snifferInfo.addClass(u.SHOW_CLASS),u.$snifferInfo.html(t.data[0].message)},function(e,t,r){throw new Error("Error: "+r+": "+e+" "+t)})}},{key:"individualSniff",value:function(e,t,r,a,n,s){var c=this,u={themeName:t,themeArgs:r,nonce:this.nonce,action:this.runSniff,file:a[s]};return!!this.ajaxAllow&&(0,i.ajax)({type:"POST",url:ajaxurl,data:u}).then(function(s){if(!0===s.success){c.count++,c.bumpProgressBar(c.count,n);var i=c.$reportItem.clone().addClass(c.SHOW_CLASS),u=c.renderJSON(s,i,r);c.$sniffReport.append(u),c.count<n?c.individualSniff(e,t,r,a,n,c.count):(c.$checkNotice.addClass(c.SHOW_CLASS),(0,o.default)(e).removeClass(c.DISABLED_CLASS))}else c.$snifferInfo.addClass(c.SHOW_CLASS),c.$snifferInfo.html(s.data[0].message),c.$progressBar.addClass(c.ERROR_CLASS)},function(e){c.count++;var t="";if(c.bumpProgressBar(c.count,n),500===e.status){var r={};r[a[s]]={errors:1,warnings:0,messages:[{column:1,fixable:!1,line:1,message:localizationObject.sniffError,severity:5,type:"ERROR"}]};var o={success:!1,data:{files:r,totals:{errors:1,fixable:0,warnings:0,fatalError:1}}};c.$progressBar.addClass(c.ERROR_CLASS),t=c.renderJSON(o)}c.$sniffReport.append(t)})}},{key:"renderJSON",value:function(e,t,r){var a=this;if(void 0===e.data||null===e.data)return" < div > "+localizationObject.errorReport+" < / div > ";var n=void 0;if(r.raw_output)n=e.data;else{if(void 0===e.data.totals||null===e.data.totals)return!1;if(0===e.data.totals.errors&&0===e.data.totals.warnings)return!1;var s=(n=t).find(this.reportItemHeading),i=n.find(this.reportReportTable),c=n.find(this.reportNoticeType),u=Object.keys(e.data.files)[0].split("/themes/")[1],f=Object.values(e.data.files)[0].messages;s.text(u),o.default.each(f,function(e,t){var r=t.line,n=t.message,s=t.type,o=c.clone().addClass(s.toLowerCase());o.find(a.reportItemLine).text(r),o.find(a.reportItemType).text(s),o.find(a.reportItemMessage).text(n),o.appendTo(i)}),c.remove()}return n}},{key:"bumpProgressBar",value:function(e,t){var r=(e/t*100).toFixed(2);this.$percentageCount.text(r+" % "),this.$meterBar.css("width",r+" % ")}}]),e}();t.default=c},function(e,t,r){"use strict";var a=s(r(0)),n=s(r(2));function s(e){return e&&e.__esModule?e:{default:e}}(0,a.default)(function(){var e={sniffReport:(0,a.default)(".js-sniff-report"),progressBar:(0,a.default)(".js-progress-bar"),snifferInfo:(0,a.default)(".js-sniffer-info"),checkNotice:(0,a.default)(".js-check-done"),percentageBar:(0,a.default)(".js-percentage-bar"),percentageText:(0,a.default)(".js-percentage-text"),percentageCount:(0,a.default)(".js-percentage-count"),errorNotice:(0,a.default)(".js-error-notice"),startNotice:(0,a.default)(".js-start-notice"),meterBar:(0,a.default)(".js-meter-bar"),reportItem:(0,a.default)(".js-report-item"),reportItemHeading:".js-report-item-heading",reportReportTable:".js-report-table",reportNoticeType:".js-report-notice-type",reportItemLine:".js-report-item-line",reportItemType:".js-report-item-type",reportItemMessage:".js-report-item-message",runAction:"run_sniffer",runSniff:"individual_sniff",nonce:(0,a.default)("#theme_sniffer_nonce").val()},t=new n.default(e);(0,a.default)(".js-start-check").on("click",function(){var e=(0,a.default)("select[name=themename]").val(),r=(0,a.default)("input[name=hide_warning]").is(":checked"),n=(0,a.default)("input[name=raw_output]").is(":checked"),s=(0,a.default)("input[name=ignore_annotations]").is(":checked"),o=(0,a.default)("select[name=minimum_php_version]").val(),i=[];(0,a.default)('input[name="selected_ruleset[]"]:checked').each(function(){i.push(this.value)}),t.enableAjax(),t.themeCheckRunPHPCS(this,e,r,n,s,o,i)}),(0,a.default)(".js-stop-check").on("click",function(){t.preventAjax(".js-start-check")}),(0,a.default)('select[name="themename"]').on("change",function(){t.preventAjax(".js-start-check"),e.progressBar.hasClass("is-shown")&&e.progressBar.removeClass("is-shown"),e.sniffReport.length&&e.sniffReport.empty()})})},,function(e,t,r){},function(e,t,r){"use strict";r(5),r(3)},function(e,t,r){e.exports=r(6)}]);